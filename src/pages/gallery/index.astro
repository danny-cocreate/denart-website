---
import { getCollection } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';

const galleryItems = await getCollection('gallery');

// Group by category
const categories = {
	'art-history': { name: 'Art History', items: [] },
	'asian-influenced': { name: 'Asian Influenced', items: [] },
	'glow': { name: 'Glow / UV', items: [] },
	'original-design': { name: 'Original Design', items: [] },
	'misc': { name: 'Other Works', items: [] },
};

galleryItems.forEach((item) => {
	const cat = item.data.category || 'misc';
	if (categories[cat]) {
		categories[cat].items.push(item);
	} else {
		categories['misc'].items.push(item);
	}
});
---

<BaseLayout title="Body Painting Gallery" description="View our gallery of body painting artwork - art history reproductions, original designs, and UV/glow paintings.">
	<!-- Dark Hero Header -->
	<section class="relative bg-gray-900 py-20 px-6 overflow-hidden">
		<div class="absolute inset-0 bg-[radial-gradient(ellipse_at_top,_rgba(107,33,168,0.3)_0%,_transparent_60%)]"></div>
		<div class="absolute inset-0 bg-[radial-gradient(ellipse_at_bottom,_rgba(212,175,55,0.1)_0%,_transparent_50%)]"></div>
		<div class="max-w-4xl mx-auto relative z-10 text-center">
			<span class="inline-block px-4 py-2 bg-brand-purple/20 text-brand-gold rounded-full text-sm font-medium mb-4 border border-brand-purple/30">
				Portfolio
			</span>
			<h1 class="text-4xl md:text-6xl font-bold text-white mb-6">Body Painting Gallery</h1>
			<p class="text-xl text-gray-300 max-w-2xl mx-auto">
				Explore our collection of body painting artwork, from classic art reproductions to original designs.
			</p>
		</div>
	</section>

	<main class="max-w-7xl mx-auto py-16 px-6 bg-dark">
		{Object.entries(categories).map(([key, category]) => (
			category.items.length > 0 && (
				<section class="mb-20">
					<div class="flex items-center gap-4 mb-8">
						<h2 class="text-2xl md:text-3xl font-bold text-white">{category.name}</h2>
						<div class="flex-grow h-px bg-gray-700"></div>
						<span class="text-gray-400 text-sm">{category.items.length} works</span>
					</div>
					<div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
						{category.items.slice(0, 12).map((item) => {
							const imageSrc = item.data.images?.[0]?.src || `/images/gallery/${item.slug}/${item.slug.split('/').pop()}.jpg`;
							const imageAlt = item.data.images?.[0]?.alt || item.data.title;
							return (
								<a href={`/gallery/${item.slug}`} class="group block">
									<div class="aspect-square overflow-hidden rounded-xl bg-dark shadow-lg hover:shadow-2xl transition-all duration-500 relative">
										<img 
											src={imageSrc.replace('.avif', '.jpg')} 
											alt={imageAlt}
											class="w-full h-full object-cover group-hover:scale-125 transition-transform duration-700 ease-out"
											loading="lazy"
										/>
										<!-- Hover overlay -->
										<div class="absolute inset-0 bg-gradient-to-t from-gray-900/80 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"></div>
										<!-- Title on hover -->
										<div class="absolute bottom-0 left-0 right-0 p-4 translate-y-full group-hover:translate-y-0 transition-transform duration-300">
											<h3 class="text-white font-bold truncate">{item.data.title}</h3>
										</div>
									</div>
									<p class="mt-3 text-sm text-gray-300 group-hover:text-brand-purple transition-colors font-medium truncate">
										{item.data.title}
									</p>
								</a>
								);
							})}
						</div>
						{category.items.length > 12 && (
							<p class="mt-8 text-center">
								<a href={`/gallery/category/${key}`} class="inline-flex items-center gap-2 text-brand-purple hover:text-purple-800 font-semibold px-6 py-3 rounded-lg hover:bg-brand-purple/10 transition-colors">
									View all {category.items.length} pieces
									<svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
										<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"></path>
									</svg>
								</a>
							</p>
						)}
					</section>
				)
			))}

		<!-- Featured Pieces -->
		<section class="mt-24 py-16 bg-gray-900/50 -mx-6 px-6 rounded-2xl">
			<div class="max-w-7xl mx-auto">
				<div class="text-center mb-12">
					<h2 class="text-3xl md:text-4xl font-bold text-white mb-4">Featured Works</h2>
					<div class="w-20 h-1 bg-brand-gold mx-auto rounded-full"></div>
				</div>
				<div class="grid md:grid-cols-3 gap-8">
					<a href="/gallery/starry-night-after-van-gogh" class="group">
						<div class="overflow-hidden rounded-xl shadow-lg hover:shadow-2xl transition-all duration-500">
							<img 
								src="/images/gallery/starry-night-after-van-gogh/starry-night.jpg" 
								alt="Starry Night after Van Gogh"
								class="w-full h-72 object-cover group-hover:scale-110 transition-transform duration-700"
							/>
						</div>
						<h3 class="mt-5 text-xl font-bold text-white group-hover:text-brand-purple transition-colors">Starry Night</h3>
						<p class="text-gray-400">After Van Gogh</p>
					</a>
					<a href="/gallery/kiss-after-klimt" class="group">
						<div class="overflow-hidden rounded-xl shadow-lg hover:shadow-2xl transition-all duration-500">
							<img 
								src="/images/gallery/misc/IMG_6419ds-web.jpg" 
								alt="The Kiss after Klimt"
								class="w-full h-72 object-cover group-hover:scale-110 transition-transform duration-700"
							/>
						</div>
						<h3 class="mt-5 text-xl font-bold text-white group-hover:text-brand-purple transition-colors">The Kiss</h3>
						<p class="text-gray-400">After Klimt</p>
					</a>
					<a href="/gallery/persistence-of-memory" class="group">
						<div class="overflow-hidden rounded-xl shadow-lg hover:shadow-2xl transition-all duration-500">
							<img 
								src="/images/gallery/misc/IMG_8297ds-web.jpg" 
								alt="Persistence of Memory after Dali"
								class="w-full h-72 object-cover group-hover:scale-110 transition-transform duration-700"
							/>
						</div>
						<h3 class="mt-5 text-xl font-bold text-white group-hover:text-brand-purple transition-colors">Persistence of Memory</h3>
						<p class="text-gray-400">After Dalí</p>
					</a>
				</div>
			</div>
		</section>

		<!-- Location -->
		<section class="mt-20 text-center">
			<h2 class="text-3xl font-bold text-white mb-6">Visit Our Studio</h2>
			<p class="text-gray-400 mb-2 text-lg">CoCreate Space</p>
			<p class="text-gray-400 mb-2">99 Kingsland Ave #102, Brooklyn, NY 11222</p>
			<a href="tel:646-926-1202" class="text-red-500 hover:text-red-400 text-xl font-medium transition-colors mb-6 inline-block">646-926-1202</a>
			<div class="flex justify-center gap-8 mt-8">
				<a href="https://bit.ly/denart-google" class="flex items-center gap-2 text-gray-400 hover:text-red-500 transition-colors" target="_blank" rel="noopener">
					<svg class="w-6 h-6" viewBox="0 0 24 24" fill="currentColor">
						<path d="M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 .307 5.387.307 12s5.56 12 12.173 12c3.573 0 6.267-1.173 8.373-3.36 2.16-2.16 2.84-5.213 2.84-7.667 0-.76-.053-1.467-.173-2.053H12.48z"/>
					</svg>
					<span class="font-semibold">Google</span>
					<span class="text-brand-gold">⭐ 5/5 (20)</span>
				</a>
				<a href="http://www.yelp.com/biz/denart-body-painting-studio-long-island-city" class="flex items-center gap-2 text-gray-400 hover:text-red-500 transition-colors" target="_blank" rel="noopener">
					<svg class="w-6 h-6" viewBox="0 0 24 24" fill="currentColor">
						<path d="M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zm4.5 14.5h-2.6l-.5 2h-2.8l.5-2h-2l.5-2h-2l.5-2h2l.5-2H9.5l.5-2h2.8l-.5 2h2.6l-.5 2h2l-.5 2h-2l-.5 2h2.8l-.5 2z"/>
					</svg>
					<span class="font-semibold">Yelp</span>
					<span class="text-brand-gold">⭐ 5/5 (22)</span>
				</a>
			</div>
		</section>
	</main>
</BaseLayout>

---
import { getCollection } from 'astro:content';
import BaseLayout from '../../layouts/BaseLayout.astro';
import SectionHeader from '../../components/SectionHeader.astro';
import GalleryGrid from '../../components/GalleryGrid.astro';
import CTAButton from '../../components/CTAButton.astro';

const galleryItems = await getCollection('gallery');

// Group by category
const categories = {
	'art-history': { name: 'Art History', items: [] },
	'asian-influenced': { name: 'Asian Influenced', items: [] },
	'glow': { name: 'Glow / UV', items: [] },
	'original-design': { name: 'Original Design', items: [] },
	'misc': { name: 'Other Works', items: [] },
};

galleryItems.forEach((item) => {
	const cat = item.data.category || 'misc';
	if (categories[cat]) {
		categories[cat].items.push({
			slug: item.slug,
			title: item.data.title,
			src: (item.data.images?.[0]?.src || `/images/gallery/${item.slug}/${item.slug.split('/').pop()}.jpg`).replace('.avif', '.jpg'),
			alt: item.data.images?.[0]?.alt || item.data.title
		});
	} else {
		categories['misc'].items.push({
			slug: item.slug,
			title: item.data.title,
			src: (item.data.images?.[0]?.src || `/images/gallery/${item.slug}/${item.slug.split('/').pop()}.jpg`).replace('.avif', '.jpg'),
			alt: item.data.images?.[0]?.alt || item.data.title
		});
	}
});

const featuredWorks = [
	{
		slug: 'starry-night-after-van-gogh',
		title: 'Starry Night',
		subtitle: 'After Van Gogh',
		src: '/images/gallery/starry-night-after-van-gogh/starry-night.jpg'
	},
	{
		slug: 'kiss-after-klimt',
		title: 'The Kiss',
		subtitle: 'After Klimt',
		src: '/images/gallery/misc/IMG_6419ds-web.jpg'
	},
	{
		slug: 'persistence-of-memory',
		title: 'Persistence of Memory',
		subtitle: 'After Dalí',
		src: '/images/gallery/misc/IMG_8297ds-web.jpg'
	}
];
---

<BaseLayout title="Body Painting Gallery" description="View our gallery of body painting artwork - art history reproductions, original designs, and UV/glow paintings.">
	<!-- Hero Header -->
	<section class="relative bg-gray-900 py-20 px-6 overflow-hidden">
		<div class="absolute inset-0 bg-[radial-gradient(ellipse_at_top,_rgba(107,33,168,0.3)_0%,_transparent_60%)]"></div>
		<div class="absolute inset-0 bg-[radial-gradient(ellipse_at_bottom,_rgba(212,175,55,0.1)_0%,_transparent_50%)]"></div>
		<div class="max-w-4xl mx-auto relative z-10">
			<SectionHeader
				label="Portfolio"
				title="Body Painting"
				titleAccent="Gallery"
				subtitle="Explore our collection of body painting artwork, from classic art reproductions to original designs."
			/>
		</div>
	</section>

	<main class="max-w-7xl mx-auto py-16 px-6 bg-dark">
		{Object.entries(categories).map(([key, category]) => (
			category.items.length > 0 && (
				<section class="mb-20">
					<div class="flex items-center gap-4 mb-8">
						<h2 class="text-2xl md:text-3xl font-bold text-white">{category.name}</h2>
						<div class="flex-grow h-px bg-gray-700"></div>
						<span class="text-gray-400 text-sm">{category.items.length} works</span>
					</div>
					<GalleryGrid 
						items={category.items.slice(0, 12)} 
						columns={4} 
						showTitles={true}
						aspectRatio="square"
					/>
					{category.items.length > 12 && (
						<div class="mt-8 text-center">
							<CTAButton href={`/gallery/category/${key}`} variant="secondary">
								View all {category.items.length} pieces
							</CTAButton>
						</div>
					)}
				</section>
			)
		))}

		<!-- Featured Pieces -->
		<section class="mt-24 py-16 bg-gray-900/50 -mx-6 px-6 rounded-2xl">
			<div class="max-w-7xl mx-auto">
				<SectionHeader
					title="Featured"
					titleAccent="Works"
					class="mb-12"
				/>
				<GalleryGrid 
					items={featuredWorks.map(work => ({
						slug: work.slug,
						title: work.title,
						src: work.src,
						alt: work.title
					}))}
					columns={3}
					showTitles={true}
					aspectRatio="video"
				/>
			</div>
		</section>

		<!-- Location -->
		<section class="mt-20 text-center">
			<SectionHeader
				title="Visit Our"
				titleAccent="Studio"
				class="mb-6"
			/>
			<p class="text-gray-400 mb-2 text-lg">CoCreate Space</p>
			<p class="text-gray-400 mb-2">99 Kingsland Ave #102, Brooklyn, NY 11222</p>
			<a href="tel:646-926-1202" class="text-red-500 hover:text-red-400 text-xl font-medium transition-colors mb-6 inline-block">646-926-1202</a>
			<div class="flex justify-center gap-8 mt-8">
				<a href="https://bit.ly/denart-google" class="flex items-center gap-2 text-gray-400 hover:text-red-500 transition-colors" target="_blank" rel="noopener">
					<svg class="w-6 h-6" viewBox="0 0 24 24" fill="currentColor">
						<path d="M12.48 10.92v3.28h7.84c-.24 1.84-.853 3.187-1.787 4.133-1.147 1.147-2.933 2.4-6.053 2.4-4.827 0-8.6-3.893-8.6-8.72s3.773-8.72 8.6-8.72c2.6 0 4.507 1.027 5.907 2.347l2.307-2.307C18.747 1.44 16.133 0 12.48 0 5.867 0 .307 5.387.307 12s5.56 12 12.173 12c3.573 0 6.267-1.173 8.373-3.36 2.16-2.16 2.84-5.213 2.84-7.667 0-.76-.053-1.467-.173-2.053H12.48z"/>
					</svg>
					<span class="font-semibold">Google</span>
					<span class="text-brand-gold">⭐ 5/5 (20)</span>
				</a>
				<a href="http://www.yelp.com/biz/denart-body-painting-studio-long-island-city" class="flex items-center gap-2 text-gray-400 hover:text-red-500 transition-colors" target="_blank" rel="noopener">
					<svg class="w-6 h-6" viewBox="0 0 24 24" fill="currentColor">
						<path d="M12 2C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2zm4.5 14.5h-2.6l-.5 2h-2.8l.5-2h-2l.5-2h-2l.5-2h2l.5-2H9.5l.5-2h2.8l-.5 2h2.6l-.5 2h2l-.5 2h-2l-.5 2h2.8l-.5 2z"/>
					</svg>
					<span class="font-semibold">Yelp</span>
					<span class="text-brand-gold">⭐ 5/5 (22)</span>
				</a>
			</div>
		</section>
	</main>
</BaseLayout>

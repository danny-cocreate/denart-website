---
import BaseLayout from '../layouts/BaseLayout.astro';
import CTAButton from '../components/CTAButton.astro';
---

<BaseLayout title="Get a Body Painting Quote" description="Request a quote for body painting services, events, or commercial projects.">
	<main>
		<!-- Hero Section - Refined with subtle animation -->
		<section class="relative min-h-[45vh] flex items-center justify-center overflow-hidden">
			<!-- Decorative gradient orbs -->
			<div class="absolute top-1/4 -left-32 w-64 h-64 bg-brand-red/20 rounded-full blur-[100px] animate-pulse"></div>
			<div class="absolute bottom-1/4 -right-32 w-80 h-80 bg-brand-red/10 rounded-full blur-[120px]"></div>
			
			<div class="absolute inset-0 bg-void"></div>
			<div class="absolute inset-0 bg-gradient-to-b from-void via-void/90 to-deepest"></div>
			
			<!-- Subtle grid pattern overlay -->
			<div class="absolute inset-0 opacity-[0.03] bg-[linear-gradient(rgba(255,255,255,1)_1px,transparent_1px),linear-gradient(90deg,rgba(255,255,255,1)_1px,transparent_1px)] bg-[size:60px_60px]"></div>
			
			<div class="relative z-10 text-center px-6 max-w-3xl mx-auto">
				<!-- Elegant badge with refined styling -->
				<span class="inline-block px-5 py-2 rounded-full text-xs font-medium mb-6 uppercase tracking-[0.2em] border border-brand-red/30 text-brand-red bg-brand-red/5 backdrop-blur-sm">
					Request Pricing
				</span>
				
				<h1 class="text-5xl md:text-7xl font-display font-light text-white mb-5 tracking-tight">
					<span class="font-semibold text-transparent bg-clip-text bg-gradient-to-r from-white via-white to-white/70">Get a Quote</span>
				</h1>
				
				<p class="text-lg md:text-xl text-gray-400 max-w-xl mx-auto leading-relaxed font-light">
					Share your vision with us and receive a personalized quote for your body painting experience.
				</p>
			</div>
		</section>

		<!-- Quote Form Section - Refined elegance -->
		<section class="bg-deepest py-20 relative">
			<!-- Subtle background texture -->
			<div class="absolute inset-0 bg-[radial-gradient(ellipse_at_top_right,rgba(196,30,58,0.05),transparent_50%)]"></div>
			
			<div class="max-w-5xl mx-auto px-6 relative">
				<div class="grid lg:grid-cols-12 gap-10">
					<!-- Form - Takes 7 columns -->
					<div class="lg:col-span-7">
						<div class="bg-void-light border border-zinc-800/60 rounded-2xl p-8 md:p-10 backdrop-blur-sm">
							<form class="space-y-6" id="quote-form">
								<!-- Name & Email Row -->
								<div class="grid md:grid-cols-2 gap-5">
									<div class="group">
										<label for="name" class="block text-xs uppercase tracking-wider font-medium text-gray-400 mb-2 group-focus-within:text-brand-red transition-colors">Name <span class="text-brand-red">*</span></label>
										<input 
											type="text" 
											id="name" 
											name="name" 
											placeholder="Your name"
											class="w-full px-4 py-3.5 bg-zinc-900/50 border border-zinc-700/50 rounded-lg text-white placeholder-zinc-600 focus:ring-2 focus:ring-brand-red/50 focus:border-brand-red/50 focus:bg-zinc-900 transition-all duration-300"
											required
										/>
									</div>
									<div class="group">
										<label for="email" class="block text-xs uppercase tracking-wider font-medium text-gray-400 mb-2 group-focus-within:text-brand-red transition-colors">Email <span class="text-brand-red">*</span></label>
										<input 
											type="email" 
											id="email" 
											name="email" 
											placeholder="your@email.com"
											class="w-full px-4 py-3.5 bg-zinc-900/50 border border-zinc-700/50 rounded-lg text-white placeholder-zinc-600 focus:ring-2 focus:ring-brand-red/50 focus:border-brand-red/50 focus:bg-zinc-900 transition-all duration-300"
											required
										/>
									</div>
								</div>
								
								<!-- Phone -->
								<div class="group">
									<label for="phone" class="block text-xs uppercase tracking-wider font-medium text-gray-400 mb-2 group-focus-within:text-brand-red transition-colors">Phone <span class="text-gray-600">(optional)</span></label>
									<input 
										type="tel" 
										id="phone" 
										name="phone" 
										placeholder="+1 (555) 000-0000"
										class="w-full px-4 py-3.5 bg-zinc-900/50 border border-zinc-700/50 rounded-lg text-white placeholder-zinc-600 focus:ring-2 focus:ring-brand-red/50 focus:border-brand-red/50 focus:bg-zinc-900 transition-all duration-300"
									/>
								</div>
								
								<!-- Service & Date Row -->
								<div class="grid md:grid-cols-2 gap-5">
									<div class="group">
										<label for="service" class="block text-xs uppercase tracking-wider font-medium text-gray-400 mb-2 group-focus-within:text-brand-red transition-colors">Service Type <span class="text-brand-red">*</span></label>
										<select 
											id="service" 
											name="service" 
											class="w-full px-4 py-3.5 bg-zinc-900/50 border border-zinc-700/50 rounded-lg text-white focus:ring-2 focus:ring-brand-red/50 focus:border-brand-red/50 focus:bg-zinc-900 transition-all duration-300 appearance-none cursor-pointer"
											required
										>
											<option value="" class="bg-zinc-900">Select a service...</option>
											<option value="fine-art" class="bg-zinc-900">Fine Art Body Painting</option>
											<option value="events" class="bg-zinc-900">Events & Commercial</option>
											<option value="hypnotic" class="bg-zinc-900">Hypnotic Body Painting</option>
											<option value="maternity" class="bg-zinc-900">Maternity Belly Painting</option>
											<option value="class" class="bg-zinc-900">Private Class / Workshop</option>
											<option value="other" class="bg-zinc-900">Other</option>
										</select>
									</div>
									<div class="group">
										<label for="date" class="block text-xs uppercase tracking-wider font-medium text-gray-400 mb-2 group-focus-within:text-brand-red transition-colors">Preferred Date</label>
										<input 
											type="date" 
											id="date" 
											name="date" 
											class="w-full px-4 py-3.5 bg-zinc-900/50 border border-zinc-700/50 rounded-lg text-white focus:ring-2 focus:ring-brand-red/50 focus:border-brand-red/50 focus:bg-zinc-900 transition-all duration-300"
										/>
									</div>
								</div>
								
								<!-- Details -->
								<div class="group">
									<label for="details" class="block text-xs uppercase tracking-wider font-medium text-gray-400 mb-2 group-focus-within:text-brand-red transition-colors">Project Details <span class="text-brand-red">*</span></label>
									<textarea 
										id="details" 
										name="details" 
										rows="4"
										placeholder="Tell us about your vision, the occasion, number of people, design ideas, or any special requirements..."
										class="w-full px-4 py-3.5 bg-zinc-900/50 border border-zinc-700/50 rounded-lg text-white placeholder-zinc-600 focus:ring-2 focus:ring-brand-red/50 focus:border-brand-red/50 focus:bg-zinc-900 transition-all duration-300 resize-none"
										required
									></textarea>
								</div>
								
								<!-- Submit Button -->
								<CTAButton 
									type="submit" 
									variant="primary" 
									size="lg" 
									class="w-full"
									showArrow={true}
									id="submit-btn"
								>
									Request Quote
								</CTAButton>
								
								<!-- Status Message -->
								<div id="form-status" class="hidden mt-4 p-4 rounded-lg text-sm"></div>
							</form>
						</div>
					</div>

					<!-- Info Sidebar - Takes 5 columns -->
					<div class="lg:col-span-5 space-y-6">
						<!-- What to Include -->
						<div class="bg-void-light/50 border border-zinc-800/40 rounded-2xl p-6 backdrop-blur-sm">
							<div class="flex items-center gap-3 mb-5">
								<div class="w-10 h-10 rounded-full bg-brand-red/10 flex items-center justify-center">
									<svg class="w-5 h-5 text-brand-red" fill="none" stroke="currentColor" viewBox="0 0 24 24">
										<path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />
									</svg>
								</div>
								<h3 class="text-lg font-display font-medium text-white">Help Us Quote Accurately</h3>
							</div>
							<ul class="space-y-3 text-gray-400">
								<li class="flex items-start gap-3">
									<span class="text-brand-red mt-1">○</span>
									<span class="text-sm">Type of body painting you're interested in</span>
								</li>
								<li class="flex items-start gap-3">
									<span class="text-brand-red mt-1">○</span>
									<span class="text-sm">Preferred date and time</span>
								</li>
								<li class="flex items-start gap-3">
									<span class="text-brand-red mt-1">○</span>
									<span class="text-sm">Number of people to be painted</span>
								</li>
								<li class="flex items-start gap-3">
									<span class="text-brand-red mt-1">○</span>
									<span class="text-sm">Design ideas or reference images</span>
								</li>
								<li class="flex items-start gap-3">
									<span class="text-brand-red mt-1">○</span>
									<span class="text-sm">Event type and guest count (if applicable)</span>
								</li>
							</ul>
						</div>

						<!-- Contact Directly -->
						<div class="bg-void-light/50 border border-zinc-800/40 rounded-2xl p-6 backdrop-blur-sm">
							<div class="flex items-center gap-3 mb-5">
								<div class="w-10 h-10 rounded-full bg-brand-red/10 flex items-center justify-center">
									<svg class="w-5 h-5 text-brand-red" fill="none" stroke="currentColor" viewBox="0 0 24 24">
										<path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />
									</svg>
								</div>
								<h3 class="text-lg font-display font-medium text-white">Contact Directly</h3>
							</div>
							
							<div class="space-y-3 text-gray-400 text-sm">
								<p>
									<span class="text-gray-500 block text-xs uppercase tracking-wider mb-1">Phone</span>
									<a href="tel:347-937-9973" class="text-brand-red hover:text-white transition-colors font-medium">347-937-9973</a>
								</p>
								<p>
									<span class="text-gray-500 block text-xs uppercase tracking-wider mb-1">Studio</span>
									<span class="text-gray-300">CoCreate Space</span><br>
									<span class="text-gray-500">99 Kingsland Ave #102</span><br>
									<span class="text-gray-500">Brooklyn, NY 11222</span>
								</p>
								<a 
									href="https://maps.app.goo.gl/uBkAyZiVJTNQCMdz5" 
									target="_blank"
									class="inline-flex items-center gap-1 text-brand-red hover:text-white font-medium text-sm transition-colors group"
								>
									<span>Get Directions</span>
									<svg class="w-3.5 h-3.5 transition-transform duration-200 group-hover:translate-x-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
										<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/>
									</svg>
								</a>
							</div>
						</div>

						<!-- Testimonial - Elegant accent card -->
						<div class="relative bg-gradient-to-br from-void-light to-void border border-zinc-800/40 rounded-2xl p-6 overflow-hidden">
							<!-- Decorative quote mark -->
							<div class="absolute top-2 right-4 text-6xl text-brand-red/10 font-display leading-none">"</div>
							
							<blockquote class="text-gray-300 italic text-sm leading-relaxed relative z-10">
								"This was FANTASTIC! I bought this as a gift for my wife and we absolutely loved the experience. I was able to see her transformed into a work of art as a living canvas."
							</blockquote>
							<p class="text-gray-600 text-xs mt-4 relative z-10">— via Yelp</p>
						</div>
					</div>
				</div>
			</div>
		</section>
	</main>
</BaseLayout>

<script>
  const form = document.getElementById('quote-form') as HTMLFormElement;
  const statusDiv = document.getElementById('form-status') as HTMLDivElement;
  const submitBtn = document.getElementById('submit-btn') as HTMLButtonElement;

  form?.addEventListener('submit', async (e) => {
    e.preventDefault();
    
    // Show loading state
    submitBtn.disabled = true;
    submitBtn.innerHTML = `<span class="flex items-center justify-center gap-2"><span>Sending...</span><svg class="w-4 h-4 animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg></span>`;
    statusDiv.classList.add('hidden');
    statusDiv.className = 'hidden mt-4 p-4 rounded-lg text-sm';
    
    try {
      const formData = new FormData(form);
      
      const response = await fetch('/api/contact', {
        method: 'POST',
        body: formData,
      });
      
      const result = await response.json();
      
      if (result.success) {
        statusDiv.textContent = result.message || 'Quote request sent successfully! We\'ll be in touch soon.';
        statusDiv.className = 'mt-4 p-4 rounded-lg bg-emerald-900/20 border border-emerald-800/30 text-emerald-400 text-sm';
        form.reset();
      } else {
        statusDiv.textContent = result.error || 'Failed to send quote request. Please try again or call us directly.';
        statusDiv.className = 'mt-4 p-4 rounded-lg bg-red-900/20 border border-red-800/30 text-red-400 text-sm';
      }
    } catch (error) {
      statusDiv.textContent = 'An error occurred. Please try again or contact us by phone.';
      statusDiv.className = 'mt-4 p-4 rounded-lg bg-red-900/20 border border-red-800/30 text-red-400 text-sm';
    }
    
    statusDiv.classList.remove('hidden');
    submitBtn.disabled = false;
    submitBtn.innerHTML = `<span class="flex items-center justify-center gap-2"><span>Request Quote</span><svg class="w-4 h-4 transition-transform duration-300 group-hover:translate-x-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 8l4 4m0 0l-4 4m4-4H3"/></svg></span>`;
  });
</script>

<style>
	/* Custom scrollbar for select */
	select option {
		background: #18181b;
		color: #fafafa;
	}
	
	/* Smooth focus transitions */
	input:focus, textarea:focus, select:focus {
		outline: none;
	}
	
	/* Subtle animation for form elements */
	@keyframes fadeInUp {
		from {
			opacity: 0;
			transform: translateY(10px);
		}
		to {
			opacity: 1;
			transform: translateY(0);
		}
	}
	
	form > div {
		animation: fadeInUp 0.5s ease-out forwards;
		opacity: 0;
	}
	
	form > div:nth-child(1) { animation-delay: 0.1s; }
	form > div:nth-child(2) { animation-delay: 0.15s; }
	form > div:nth-child(3) { animation-delay: 0.2s; }
	form > div:nth-child(4) { animation-delay: 0.25s; }
	form > div:nth-child(5) { animation-delay: 0.3s; }
	form > div:nth-child(6) { animation-delay: 0.35s; }
	form > button { animation-delay: 0.4s; }
</style>
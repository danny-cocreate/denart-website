---
import BaseLayout from '../layouts/BaseLayout.astro';
import ContactForm from '../components/ContactForm.astro';
---

<BaseLayout title="Get a Body Painting Quote" description="Request a quote for body painting services, events, or commercial projects.">
	<main>
		<!-- Hero Section -->
		<section class="relative min-h-[40vh] flex items-center justify-center overflow-hidden">
			<div class="absolute inset-0 bg-void"></div>
			<div class="absolute inset-0 bg-gradient-to-b from-void via-void/80 to-deepest"></div>
			<div class="relative z-10 text-center px-6 max-w-4xl mx-auto">
				<span class="inline-block px-4 py-1.5 rounded-full text-sm font-medium mb-4 uppercase tracking-wide border border-white/30 text-white/80">
					Contact Us
				</span>
				<h1 class="text-4xl md:text-6xl font-display font-bold text-white mb-4">Get a Quote</h1>
				<p class="text-xl md:text-2xl text-gray-300">Tell us about your project and we'll get back to you with a custom quote.</p>
			</div>
		</section>

		<!-- Quote Form Section -->
		<section class="bg-deepest py-16">
			<div class="max-w-5xl mx-auto px-6">
				<div class="grid md:grid-cols-2 gap-12">
					<!-- Form -->
					<div class="bg-void-light border border-zinc-800 rounded-2xl p-8">
						<h2 class="text-2xl font-display font-bold text-white mb-6">Request a Quote</h2>
						<form class="space-y-5" id="quote-form">
							<div>
								<label for="name" class="block text-sm font-medium text-gray-300 mb-2">Name *</label>
								<input 
									type="text" 
									id="name" 
									name="name" 
									class="w-full px-4 py-3 bg-zinc-800 border border-zinc-700 rounded-lg text-white placeholder-zinc-500 focus:ring-2 focus:ring-brand-red focus:border-transparent transition-colors"
									required
								/>
							</div>
							<div>
								<label for="email" class="block text-sm font-medium text-gray-300 mb-2">Email *</label>
								<input 
									type="email" 
									id="email" 
									name="email" 
									class="w-full px-4 py-3 bg-zinc-800 border border-zinc-700 rounded-lg text-white placeholder-zinc-500 focus:ring-2 focus:ring-brand-red focus:border-transparent transition-colors"
									required
								/>
							</div>
							<div>
								<label for="phone" class="block text-sm font-medium text-gray-300 mb-2">Phone</label>
								<input 
									type="tel" 
									id="phone" 
									name="phone" 
									class="w-full px-4 py-3 bg-zinc-800 border border-zinc-700 rounded-lg text-white placeholder-zinc-500 focus:ring-2 focus:ring-brand-red focus:border-transparent transition-colors"
								/>
							</div>
							<div>
								<label for="service" class="block text-sm font-medium text-gray-300 mb-2">Service Type *</label>
								<select 
									id="service" 
									name="service" 
									class="w-full px-4 py-3 bg-zinc-800 border border-zinc-700 rounded-lg text-white focus:ring-2 focus:ring-brand-red focus:border-transparent transition-colors"
									required
								>
									<option value="" class="bg-zinc-800">Select a service...</option>
									<option value="fine-art" class="bg-zinc-800">Fine Art Body Painting (Private Session)</option>
									<option value="events" class="bg-zinc-800">For Events and Commercial Projects</option>
									<option value="hypnotic" class="bg-zinc-800">Hypnotic Body Painting</option>
									<option value="maternity" class="bg-zinc-800">Maternity Belly Painting</option>
									<option value="class" class="bg-zinc-800">Private Class or Workshop</option>
									<option value="other" class="bg-zinc-800">Other</option>
								</select>
							</div>
							<div>
								<label for="date" class="block text-sm font-medium text-gray-300 mb-2">Preferred Date</label>
								<input 
									type="date" 
									id="date" 
									name="date" 
									class="w-full px-4 py-3 bg-zinc-800 border border-zinc-700 rounded-lg text-white focus:ring-2 focus:ring-brand-red focus:border-transparent transition-colors"
								/>
							</div>
							<div>
								<label for="details" class="block text-sm font-medium text-gray-300 mb-2">Project Details *</label>
								<textarea 
									id="details" 
									name="details" 
									rows="5"
									placeholder="Tell us about your vision, the occasion, number of people, design ideas, etc."
									class="w-full px-4 py-3 bg-zinc-800 border border-zinc-700 rounded-lg text-white placeholder-zinc-500 focus:ring-2 focus:ring-brand-red focus:border-transparent transition-colors resize-none"
									required
								></textarea>
							</div>
							<button 
								type="submit" 
								id="submit-btn"
								class="w-full py-4 bg-brand-red hover:bg-brand-red-hover text-white font-semibold rounded-xl transition-all hover:shadow-lg hover:shadow-brand-red/30 hover:-translate-y-0.5 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:-translate-y-0"
							>
								Request Quote
							</button>
						</form>
						
						<!-- Status Message -->
						<div id="form-status" class="hidden mt-4 p-4 rounded-lg"></div>
					</div>

					<!-- Info Sidebar -->
					<div class="space-y-6">
						<div class="bg-void-light border border-zinc-800 rounded-2xl p-6">
							<h3 class="text-lg font-display font-bold text-white mb-4">What to Include</h3>
							<ul class="space-y-3 text-gray-300">
								<li class="flex items-start gap-3">
									<span class="text-brand-red mt-1">●</span>
									<span>Type of body painting you're interested in</span>
								</li>
								<li class="flex items-start gap-3">
									<span class="text-brand-red mt-1">●</span>
									<span>Preferred date and time</span>
								</li>
								<li class="flex items-start gap-3">
									<span class="text-brand-red mt-1">●</span>
									<span>Number of people to be painted</span>
								</li>
								<li class="flex items-start gap-3">
									<span class="text-brand-red mt-1">●</span>
									<span>Design ideas or references</span>
								</li>
								<li class="flex items-start gap-3">
									<span class="text-brand-red mt-1">●</span>
									<span>If for an event: event type and guest count</span>
								</li>
								<li class="flex items-start gap-3">
									<span class="text-brand-red mt-1">●</span>
									<span>Any special requirements</span>
								</li>
							</ul>
						</div>

						<div class="bg-void-light border border-zinc-800 rounded-2xl p-6">
							<h3 class="text-lg font-display font-bold text-white mb-4">Contact Directly</h3>
							<p class="text-gray-300 mb-3">
								<strong>Phone:</strong> <a href="tel:646-926-1202" class="text-brand-red hover:text-white transition-colors">646-926-1202</a>
							</p>
							<p class="text-gray-300 mb-4">
								<strong>Location:</strong><br>
								CoCreate Space<br>
								99 Kingsland Ave #102<br>
								Brooklyn, NY 11222
							</p>
							<a 
								href="https://maps.app.goo.gl/uBkAyZiVJTNQCMdz5" 
								target="_blank"
								class="text-brand-red hover:text-white font-semibold transition-colors"
							>
								Get Directions →
							</a>
						</div>

						<!-- Testimonial -->
						<div class="bg-void-light border-l-4 border-brand-red rounded-r-2xl p-6">
							<blockquote class="text-gray-300 italic">
								"This was FANTASTIC! I bought this as a gift for my wife and we absolutely loved the experience. I was able to see her transformed into a work of art as a living canvas."
							</blockquote>
							<p class="text-gray-500 mt-3">— via Yelp</p>
						</div>
					</div>
				</div>
			</div>
		</section>
	</main>
</BaseLayout>

<script>
  const form = document.getElementById('quote-form') as HTMLFormElement;
  const statusDiv = document.getElementById('form-status') as HTMLDivElement;
  const submitBtn = document.getElementById('submit-btn') as HTMLButtonElement;

  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    
    // Show loading state
    submitBtn.disabled = true;
    submitBtn.textContent = 'Sending...';
    statusDiv.classList.add('hidden');
    statusDiv.className = 'hidden mt-4 p-4 rounded-lg';
    
    try {
      const formData = new FormData(form);
      
      const response = await fetch('/api/contact', {
        method: 'POST',
        body: formData,
      });
      
      const result = await response.json();
      
      if (result.success) {
        statusDiv.textContent = result.message || 'Quote request sent successfully!';
        statusDiv.className = 'mt-4 p-4 rounded-lg bg-green-900/50 border border-green-700 text-green-300';
        form.reset();
      } else {
        statusDiv.textContent = result.error || 'Failed to send quote request. Please try again.';
        statusDiv.className = 'mt-4 p-4 rounded-lg bg-red-900/50 border border-red-700 text-red-300';
      }
    } catch (error) {
      statusDiv.textContent = 'An error occurred. Please try again.';
      statusDiv.className = 'mt-4 p-4 rounded-lg bg-red-900/50 border border-red-700 text-red-300';
    }
    
    statusDiv.classList.remove('hidden');
    submitBtn.disabled = false;
    submitBtn.textContent = 'Request Quote';
  });
</script>

---
import { getCollection } from 'astro:content';
import ServiceLayout from '../../layouts/ServiceLayout.astro';
import PageHero from '../../components/PageHero.astro';
import CTAButton from '../../components/CTAButton.astro';
import SectionHeader from '../../components/SectionHeader.astro';
import FAQ from '../../components/FAQ.astro';

export async function getStaticPaths() {
  const services = await getCollection('services');
  return services.map((service) => ({
    params: { slug: service.slug },
    props: { service },
  }));
}

const { service } = Astro.props;
const { Content } = await service.render();

// Default FAQs for body painting services
const defaultFAQs = [
  {
    question: "Is body painting safe?",
    answer: "Yes! We use only professional-grade, skin-safe paints from brands like Ben Nye, Kryolan, and Mehron. These are specifically formulated for skin application and are hypoallergenic."
  },
  {
    question: "How long does a body painting session take?",
    answer: "Session length varies depending on the complexity of the design. A simple design may take 1-2 hours, while full-body artwork can take 4-6 hours. We'll discuss timing when you book."
  },
  {
    question: "What types of paint do you use?",
    answer: "We use water-based body paints from professional brands: Ben Nye, Kryolan, and Mehron. These paints are FDA-compliant, non-toxic, and easy to remove with soap and water."
  },
  {
    question: "How do I prepare for my session?",
    answer: "Avoid applying lotion on the day of your session as it affects paint adhesion. Eat beforehand and stay hydrated. Bring loose clothing to wear after, and hair ties if you have long hair."
  },
  {
    question: "How do I remove the body paint?",
    answer: "Our paints wash off easily with soap and water in the shower. Some colors may require a bit of scrubbing. Rubbing alcohol or baby wipes can help with stubborn areas."
  }
];

const faqs = service.data.faqs || defaultFAQs;
---

<ServiceLayout title={service.data.title} description={service.data.description}>
  <PageHero
    badge="Service"
    title={service.data.title}
    subtitle={service.data.tagline}
    minHeight="min-h-[50vh]"
    animate={false}
  >
    <div slot="cta">
      {service.data.packages && service.data.packages.length > 0 && (
        <div class="mt-8 flex flex-wrap justify-center gap-4">
          {service.data.packages.map((pkg) => (
            <div class="bg-void-light/80 backdrop-blur rounded-xl p-4 border border-zinc-700">
              <p class="text-2xl font-bold text-brand-gold">{pkg.price}</p>
              <p class="text-sm text-sand-muted">{pkg.name}</p>
            </div>
          ))}
        </div>
      )}
      <div class="mt-8 flex justify-center gap-4">
        <CTAButton href="/get-a-quote" variant="primary" size="lg">
          Book Now
        </CTAButton>
      </div>
    </div>
  </PageHero>

  <!-- Main Content -->
  <article class="max-w-4xl mx-auto py-12 md:py-16 px-6 bg-void">
    {service.data.heroImage && (
      <div class="relative mb-12 rounded-2xl overflow-hidden shadow-2xl border border-zinc-800">
        <img src={service.data.heroImage} alt={service.data.title} class="w-full h-80 md:h-96 object-cover" />
        <div class="absolute inset-0 bg-gradient-to-t from-void/60 to-transparent"></div>
      </div>
    )}
    
    <div class="prose prose-lg prose-invert max-w-none 
      prose-headings:font-display 
      prose-h1:text-3xl prose-h1:mt-10 prose-h1:mb-4 prose-h1:text-sand
      prose-h2:text-2xl prose-h2:mt-14 prose-h2:mb-5 prose-h2:text-sand prose-h2:border-b prose-h2:border-zinc-700 prose-h2:pb-3
      prose-h3:text-xl prose-h3:mt-10 prose-h3:mb-4 prose-h3:text-brand-gold/90
      prose-p:text-sand-muted prose-p:leading-relaxed prose-p:mb-5
      prose-li:text-sand-muted prose-li:marker:text-brand-red
      prose-strong:text-sand prose-strong:font-semibold
      prose-blockquote:border-l-4 prose-blockquote:border-brand-red prose-blockquote:bg-void-light/50 prose-blockquote:py-2 prose-blockquote:px-4 prose-blockquote:rounded-r-lg prose-blockquote:italic
      prose-a:text-brand-gold hover:prose-a:text-brand-gold-light prose-a:transition-colors
      prose-img:rounded-xl prose-img:shadow-lg prose-img:my-8">
      <Content />
    </div>
    
    <!-- FAQ Section -->
    <div class="mt-20 pt-10 border-t border-zinc-800">
      <FAQ items={faqs} title="Frequently Asked Questions" />
    </div>

    <!-- CTA Section -->
    <div class="mt-16 p-8 md:p-12 bg-void-light rounded-2xl text-center border border-zinc-800">
      <SectionHeader
        title="Ready to book this service?"
        subtitle="Contact us to schedule your body painting session. We'll help bring your vision to life."
        size="md"
      />
      <div class="mt-8 flex justify-center">
        <CTAButton href="/get-a-quote" variant="primary" size="lg">
          Get a Quote
        </CTAButton>
      </div>
    </div>
  </article>
</ServiceLayout>

---
import BaseLayout from '../layouts/BaseLayout.astro';
import SectionHeader from '../components/SectionHeader.astro';

// Extract source from name (e.g., "Name (Yelp)" â†’ source: "Yelp")
function getSource(name: string): { displayName: string; source: string } {
  const match = name.match(/^(.+?)\s*\(([^)]+)\)$/);
  if (match) {
    return { displayName: match[1].trim(), source: match[2] };
  }
  return { displayName: name, source: 'Anonymous' };
}

const eventTestimonials = [
  { name: "Camoy Briscoe", quote: "Thanks again for doing the job last minute. The girls looked amazing!!" },
  { name: "Howard Haber", quote: "Spectacular! You and your models are both classy and amazing! So perfect! You definately made a few fans but I lead the pack. Just amazing. Thank you!" },
  { name: "Shallini M (Yelp)", quote: "Danny is a very talented painter who painted two models at my husband's 40th Birthday party. He put a great deal of thought and care into the details. Everyone at the party loved watching him paint. Danny accomodated a special request of ours to paint a famous piece of art that he had not done before which came out amazing." },
  { name: "Rebecca Bilger, The ONE Group", quote: "Thanks so much! The girls looked/were fantastic! I will definitely keep you posted on upcoming events." },
  { name: "Seema Gupta", quote: "I can never forget what a Hit your body painting was at my party last year. I wish you all the luck in the world and hope you keep making progress" },
  { name: "Soren Meischeid, Yoga Rave", quote: "Thank YOU for bringing the color and glow! You guys were a big hit! And I'm so glad you were able to join us." },
  { name: "Samantha A, Kobo", quote: "Thanks so much for helping make our event special, you did a great job!" },
];

const photoTestimonials = [
  { name: "Michelle, Google Places", quote: "You simply must experience this!!! Like the rater belowâ€¦ I saw this offer on Living Socialâ€¦ except that I didn't hesitate to grab it for even one second, and I am SO glad that I was able to experience this opportunity. I picked the Persistence of Memory piece to be painted on my front and Gulya truly transformed me into a work of art. She was personable, skilled and did an incredible job with the paintingâ€¦ she knew just how to customize the original painting to my brown skin tone and body type." },
  { name: "Nic, Google Places", quote: "AWESOME time for the ticklishâ€¦ TOTALLY recommend this for anyone looking for something outrageous to do! Not something that I had ever thought about but when the offer came up on LivingSocial, I grabbed it! I am a plus size woman and the dragon came out fierce. Those that I showed couldn't tell if it was my front or my backside. Danny was a pleasure to work with, and kept me at ease the entire time." },
  { name: "Jennifer, Google Places", quote: "REALLY cool experienceâ€¦ I would recommend to anyone who is looking to just live and experience interesting things in lifeâ€¦ you only live once so why not do interesting and fun things! I was very comfortable, nothing to be nervous or self conscious aboutâ€¦ I am a photographer so I was able to contribute to the photo session as well, which was a lot of funâ€¦" },
  { name: "Jessica, Google Places", quote: "It truly was an amazing experience. I also have been wanting to experience body painting for a while, and Den Art made it possible and, as most have mentioned, the environment was very comfortable. Def. recommending to friends, I'd do it again." },
  { name: "Elizabeth, Google Places", quote: "I loved this! I would definitely recommend this experience. The painting was beautiful and the photo shoot was so much fun. If you're thinking about doing it, you should definitely go for it." },
  { name: "Nance, Google Places", quote: "Would recommend to anyone!! I knew I wanted to do a body painting session as soon as I saw it, something in me told me I can do that! I had such a great time with the artists at DEN ART! The session was a very empowering experience and even though you are nude in front of people you barely know I still felt very comfortable." },
  { name: "Spencer, Google Places", quote: "This was FANTASTIC! I bought this as a gift for my wife and we absolutely loved the experience. I was able to see her transformed into a work of art as a living canvas. Danny was excellent in doing the painting and the photography. It provided an excellent memory for my wife and I to share and the pictures look fantastic." },
  { name: "Debbie Abazia", quote: "Thank you! You certainly made me more beautiful than ever. You're the best!" },
  { name: "Helen Shpits", quote: "Thanks for the pics and the amazing opportunity. I absolutely loved every minute of it" },
  { name: "Kindra M (Yelp)", quote: "Danny is one of the most talented and professional artists and photographers i have ever worked with. He put me right at ease when doing my body paint and his recreation of Dali's temptation of st.anthony was just amazing. I would work with him again anytime he wanted to." },
  { name: "Cristina L (Yelp)", quote: "Such a pleasure to work with. Danny is an extremely gifted painter and i felt honored to be his canvas. I had Van Gogh's Starry Night painted on my body and Danny was very professional and very respectful and it turned out beautifully. Thanks Danny!" },
  { name: "DI, Google Places", quote: "I absolutely LOVED my experience at DenArt. Danny is an amazing talent. His painting of the Spanish dancer was so beautifully done and detailed. The photo session was also a lot of fun and we got so many great pictures. Everyone at DenArt is so wonderful and professional." },
  { name: "Francesca, Google Places", quote: "I had an amazing experience at Den Art. I thought I might be self conscious of being undressed and of posing for pictures but everyone made me feel so comfortable and was so professional that I immediately felt at ease and thoroughly enjoyed the whole experience. My husband was blown away by the painting and photographs." },
  { name: "Cleone P (Yelp)", quote: "Den Art is definitely an experience that i would recommend! Danny makes you feel totally at ease and his talent makes the painting come to life on your body! It's something not only fun but a memory and pictures you can keep forever." },
  { name: "C D (Yelp)", quote: "I didn't think I would feel comfortable being completely nude, but Danny was extremely professional and made me feel at ease. A once in a lifetime experience!" },
  { name: "Kimberly S (Yelp)", quote: "This was the best time that I have ever had naked in front of strangers! Last year I saw a Living Social deal for the body painting/photo shoot package and immediately convinced my boyfriend to get painted with me. We finally went last night and it was awesome!" },
  { name: "Meg M (Yelp)", quote: "I bought the body painting session for my husband and I to do together and it was amazing. Danny and his crew made us (who are eligible for AARP) feel great, sexy and joyous. They are incredibly talented and caring artists. The experience is liberating and a lot of fun." },
  { name: "Alexandria H, Google Places", quote: "GO DO THIS!!!!!!! You must try this. Danny and his staff are very professional and kind and made this a relaxing fun experience. I can't wait to do this again. My photos came out great and I even purchased additional." },
  { name: "Melissa F (Yelp)", quote: "Danny was awesome to work with and made me feel very relaxed and comfortable. I loved my body art so much that it inspired me to get the tattoo I've been hesitating on. I'm def going back!" },
  { name: "Ashley P (Yelp)", quote: "Awesome experience! Danny and his team were very professional. It was so much fun and I left there feeling sexy and confident. Never in my life did I think I'd do something like this and I wasn't sure what to expect. It turned out to be such an amazing experience." },
  { name: "Sheryl S (Yelp)", quote: "Our experience at Den Art was amazing from start to finish. My boyfriend and I decided to do a couples nude body painting session and had an idea of what we wanted painted. We arrived at the studio as someone else was finishing their session. Danny and his partner were very thoughtful and collaborative." },
  { name: "Ashley C (Yelp)", quote: "Such a great experience that every one should try and a real ego booster. I chose a Asian inspired dragon on my back and couldn't believe how good and quickly it was done. Danny and his assistant were very nice and made sure I was comfortable every step along the way. Love how everything came out." },
  { name: "Anonymous (Groupon)", quote: "I purchased a groupon for a bodypainting experience at DenArt awhile back and found out i was pregnant shortly after. DenArt was kind enough to push back the expiration date just a bit so i could do the experience when I was 8months pregnant. We did the tree of life which was perfect." },
  { name: "Danny (Google)", quote: "Danny is excellent. I came with a friend today who wanted to get painted and try something new. He was very friendly, helpful and really comforting overall. My friend was a little nervous, but he was open, not creepy, and made the whole process so fun. I highly recommend this place." },
  { name: "Anonymous (Google)", quote: "What great fun this was! My gf and I had an hour session with Danny. I had butterfly wings painted on my back and flowers and dragon fly painted on my stomach- it turned out amazing. I loved the pictures taken as well! Highly recommended" },
];
---

<BaseLayout title="Customer Reviews" description="Read what our clients say about their body painting experiences at DenArt studio.">
	<main class="max-w-4xl mx-auto section-loose px-6">
		<SectionHeader
			title="Customer"
			titleAccent="Reviews"
			subtitle="Hear from our happy 'canvases' about their body painting experiences."
			centered={true}
			class="mb-16"
		/>

		<!-- Rating Summary - Prominent -->
		<div class="text-center py-10 mb-16 bg-gradient-to-b from-white/5 to-transparent rounded-2xl border border-white/10">
			<div class="flex items-center justify-center gap-2 mb-3">
				<span class="text-4xl text-yellow-400">â˜…</span>
				<span class="text-4xl text-yellow-400">â˜…</span>
				<span class="text-4xl text-yellow-400">â˜…</span>
				<span class="text-4xl text-yellow-400">â˜…</span>
				<span class="text-4xl text-yellow-400">â˜…</span>
			</div>
			<p class="text-2xl font-semibold text-sand mb-2">5.0 Average Rating</p>
			<p class="text-sand/60">Based on 60+ reviews from across the web</p>
			
			<div class="flex items-center justify-center gap-8 mt-8">
				<a href="https://www.yelp.com/biz/denart-body-painting-studio-brooklyn-3" class="flex items-center gap-3 text-sand hover:text-white transition-colors group" target="_blank" rel="noopener">
					<span class="px-3 py-1 bg-yelp text-white text-xs font-bold rounded">YELP</span>
					<span class="text-xl font-bold">4.8</span>
					<span class="text-sand/60 text-sm group-hover:text-sand/80 transition-colors">(38 reviews)</span>
				</a>
				<span class="text-white/20">|</span>
				<a href="https://www.google.com/maps/search/denart+body+painting+brooklyn" class="flex items-center gap-3 text-sand hover:text-white transition-colors group" target="_blank" rel="noopener">
					<span class="px-3 py-1 bg-google text-white text-xs font-bold rounded">GOOGLE</span>
					<span class="text-xl font-bold">5.0</span>
					<span class="text-sand/60 text-sm group-hover:text-sand/80 transition-colors">(25 reviews)</span>
				</a>
			</div>
		</div>

		<!-- Event Reviews Section -->
		<div class="mb-20">
			<!-- Enhanced Section Header -->
			<div class="flex items-center gap-4 mb-10">
				<div class="flex-1 h-px bg-gradient-to-r from-transparent to-white/20"></div>
				<div class="flex items-center gap-3">
					<span class="text-2xl">âœ¨</span>
					<h2 class="text-2xl font-display text-sand tracking-widest uppercase">Event Clients</h2>
					<span class="text-2xl">âœ¨</span>
				</div>
				<div class="flex-1 h-px bg-gradient-to-l from-transparent to-white/20"></div>
			</div>
			
			<div class="grid gap-6">
				{eventTestimonials.map((item) => {
					const { displayName, source } = getSource(item.name);
					const isLongQuote = item.quote.length > 200;
					return (
						<article class="review-card bg-white/5 rounded-xl p-6 border border-white/10 relative group">
							<!-- Source Badge -->
							<div class="absolute top-4 right-4">
								<span class={`source-badge px-2 py-1 text-xs font-semibold rounded ${
									source === 'Yelp' ? 'bg-yelp/20 text-yelp border border-yelp/30' :
									source === 'Google' ? 'bg-google/20 text-google border border-google/30' :
									source === 'Groupon' ? 'bg-brand-purple/20 text-brand-purple border border-brand-purple/30' :
									'bg-white/10 text-sand/60 border border-white/10'
								}`}>
									{source}
								</span>
							</div>
							
							<blockquote class="pr-16">
								<p class={`text-sand/80 leading-relaxed mb-4 ${isLongQuote ? 'quote-text' : ''}`} data-full={item.quote}>
									"{isLongQuote ? item.quote.slice(0, 200) + '...' : item.quote}"
									{isLongQuote && (
										<button class="read-more-btn text-brand-red hover:text-white text-sm font-medium ml-2 transition-colors underline underline-offset-2" data-expanded="false">
											Read more
										</button>
									)}
								</p>
								<footer class="flex items-center gap-2">
									<span class="w-8 h-px bg-brand-red"></span>
									<span class="text-base font-medium text-brand-red">{displayName}</span>
								</footer>
							</blockquote>
						</article>
					);
				})}
			</div>
		</div>

		<!-- Photo Shoot Reviews Section -->
		<div class="mb-20">
			<!-- Enhanced Section Header -->
			<div class="flex items-center gap-4 mb-10">
				<div class="flex-1 h-px bg-gradient-to-r from-transparent to-white/20"></div>
				<div class="flex items-center gap-3">
					<span class="text-2xl">ðŸ“¸</span>
					<h2 class="text-2xl font-display text-sand tracking-widest uppercase">Photo Shoot Clients</h2>
					<span class="text-2xl">ðŸ“¸</span>
				</div>
				<div class="flex-1 h-px bg-gradient-to-l from-transparent to-white/20"></div>
			</div>
			
			<div class="grid gap-6">
				{photoTestimonials.map((item) => {
					const { displayName, source } = getSource(item.name);
					const isLongQuote = item.quote.length > 200;
					return (
						<article class="review-card bg-white/5 rounded-xl p-6 border border-white/10 relative group">
							<!-- Source Badge -->
							<div class="absolute top-4 right-4">
								<span class={`source-badge px-2 py-1 text-xs font-semibold rounded ${
									source === 'Yelp' ? 'bg-yelp/20 text-yelp border border-yelp/30' :
									source === 'Google' ? 'bg-google/20 text-google border border-google/30' :
									source === 'Groupon' ? 'bg-brand-purple/20 text-brand-purple border border-brand-purple/30' :
									'bg-white/10 text-sand/60 border border-white/10'
								}`}>
									{source}
								</span>
							</div>
							
							<blockquote class="pr-16">
								<p class={`text-sand/80 leading-relaxed mb-4 ${isLongQuote ? 'quote-text' : ''}`} data-full={item.quote}>
									"{isLongQuote ? item.quote.slice(0, 200) + '...' : item.quote}"
									{isLongQuote && (
										<button class="read-more-btn text-brand-red hover:text-white text-sm font-medium ml-2 transition-colors underline underline-offset-2" data-expanded="false">
											Read more
										</button>
									)}
								</p>
								<footer class="flex items-center gap-2">
									<span class="w-8 h-px bg-brand-purple"></span>
									<span class="text-base font-medium text-brand-purple">{displayName}</span>
								</footer>
							</blockquote>
						</article>
					);
				})}
			</div>
		</div>
	</main>
</BaseLayout>

<style>
	/* Card hover effects */
	.review-card {
		transition: transform 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease;
	}
	
	.review-card:hover {
		transform: translateY(-4px);
		border-color: var(--hover-color, rgba(255, 255, 255, 0.2));
		box-shadow: 0 8px 30px rgba(0, 0, 0, 0.3), 0 0 0 1px var(--hover-color, rgba(255, 255, 255, 0.1));
	}
	
	/* Event cards - red glow on hover */
	.review-card:nth-child(odd):hover {
		--hover-color: theme('colors.brand.red / 0.3');
	}
	
	/* Photo shoot cards - purple glow on hover */
	.review-card:nth-child(even):hover {
		--hover-color: theme('colors.brand.purple / 0.3');
	}
	
	/* Read more button */
	.read-more-btn {
		cursor: pointer;
	}
	
	.read-more-btn:hover {
		color: white;
	}
	
	/* Link transitions */
	a {
		transition: color 0.2s ease;
	}
	
	/* Source badge styling */
	.source-badge {
		transition: background-color 0.2s ease, color 0.2s ease;
	}
	
	@media (max-width: 640px) {
		.review-card blockquote {
			padding-right: 0;
		}
		
		.review-card .source-badge {
			position: static;
			display: inline-block;
			margin-bottom: 0.5rem;
		}
		
		.review-card blockquote {
			padding-top: 1.5rem;
		}
	}
</style>

<script>
	// Read more expand functionality
	document.querySelectorAll('.read-more-btn').forEach(btn => {
		btn.addEventListener('click', (e) => {
			const target = e.target as HTMLButtonElement;
			const paragraph = target.previousElementSibling as HTMLElement;
			const isExpanded = target.dataset.expanded === 'true';
			
			if (isExpanded) {
				// Collapse
				paragraph.textContent = '"' + paragraph.dataset.full?.slice(0, 200) + '..."';
				target.textContent = 'Read more';
				target.dataset.expanded = 'false';
			} else {
				// Expand
				paragraph.textContent = '"' + paragraph.dataset.full + '"';
				target.textContent = 'Show less';
				target.dataset.expanded = 'true';
			}
		});
	});
</script>

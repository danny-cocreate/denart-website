# DenArt - Complete site config
# Overrides any previous .htaccess

# Disable directory listing
Options -Indexes

# Force HTTPS
RewriteEngine On
RewriteCond %{HTTPS} off
RewriteRule ^(.*)$ https://%{HTTP_HOST}%{REQUEST_URI} [L,R=301]

# www to non-www
RewriteCond %{HTTP_HOST} ^www\.denartny\.com [NC]
RewriteRule ^(.*)$ https://denartny.com/$1 [L,R=301]

# Deny access to WordPress files
RewriteRule ^wp-admin$ - [F,L]
RewriteRule ^wp-admin/ - [F,L]
RewriteRule ^wp-content - [F,L]
RewriteRule ^wp-includes - [F,L]
RewriteRule ^xmlrpc\.php$ - [F,L]

# WordPress redirects to home
RewriteRule ^(blog|category|tag|author|feed|rss|atom)/.*$ / [R=301,L]
RewriteRule ^[0-9]{4}/[0-9]{2}/.*$ / [R=301,L]

# Cache static assets
<FilesMatch "\.(js|css|png|jpg|jpeg|gif|ico|svg|webp|avif|woff|woff2|ttf|eot)$">
    Header set Cache-Control "public, max-age=31536000, immutable"
</FilesMatch>

# Security headers
Header set X-Content-Type-Options "nosniff"
Header set X-Frame-Options "SAMEORIGIN"
